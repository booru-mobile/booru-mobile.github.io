(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},23:function(e,t,n){},24:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),l=(n(23),n(5)),u=n(3),i=n(9),s=n(17);n(24);function m(e){var t=e.initialResultsUrl,n=e.nextResultsUrl,a=r.a.useState({searchQuery:"",searchResults:[],loading:!1}),o=Object(i.a)(a,2),c=o[0],l=o[1];function u(e){l(function(t){return Object.assign({},t,e)})}var m=r.a.useRef();var f=Object(s.a)(),h=Object(i.a)(f,2),d=h[0];if(h[1]&&!c.loading&&c.searchResults.length>0){u({loading:!0});var p=c.searchResults[c.searchResults.length-1].id;fetch(n({query:c.searchQuery,lastPostId:p})).then(function(e){return e.json()}).then(function(e){l(function(t){return Object.assign({},t,{searchResults:t.searchResults.concat(e.filter(function(e){return e.file_url}))})}),setTimeout(function(){return u({loading:!1})},300)})}return r.a.createElement("div",{id:"search_page"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u({loading:!0}),fetch(t(c.searchQuery)).then(function(e){return e.json()}).then(function(e){u({searchResults:e.filter(function(e){return e.file_url})}),setTimeout(function(){return u({loading:!1})},300)})}},r.a.createElement("input",{type:"text",value:c.searchQuery,onChange:function(e){u({searchQuery:e.target.value})}}),r.a.createElement("input",{type:"submit",value:"Search"}),r.a.createElement("button",{type:"button",onClick:function(){return m.current.scrollTo(0,0)}},"Back to top")),r.a.createElement("section",{ref:m},r.a.createElement("ol",null,c.searchResults.map(function(e){var t=e.file_url,n=e.description;return r.a.createElement("li",{key:t},r.a.createElement("img",{src:t,alt:n}))}),c.loading&&r.a.createElement("li",{key:"spinner"},"Loading...")),r.a.createElement("div",{ref:d})))}var f=25;function h(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"booru mobile"),r.a.createElement("p",null,r.a.createElement(l.b,{to:"/e621"},"e621")),r.a.createElement("p",null,r.a.createElement(l.b,{to:"/danbooru"},"danbooru")))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(function(){var e="https://booru-mobile-proxy.herokuapp.com";return r.a.createElement(l.a,null,r.a.createElement(u.a,{exact:!0,path:"/",component:h}),r.a.createElement(u.a,{path:"/e621",render:function(){return r.a.createElement(m,{initialResultsUrl:function(t){return"".concat(e,"/e621/post/index.json?limit=").concat(f,"&tags=").concat(t,"&_client=booru-mobile/1.0")},nextResultsUrl:function(t){var n=t.query,a=t.lastPostId;return"".concat(e,"/e621/post/index.json?limit=").concat(f,"&before_id=").concat(a,"&tags=").concat(n,"&_client=booru-mobile/1.0")}})}}),r.a.createElement(u.a,{path:"/danbooru",render:function(){return r.a.createElement(m,{initialResultsUrl:function(t){return"".concat(e,"/danbooru/posts.json?limit=").concat(f,"&tags=").concat(t,"&page=1&_client=booru-mobile/1.0")},nextResultsUrl:function(t){var n=t.query,a=t.lastPostId;return"".concat(e,"/danbooru/posts.json?limit=").concat(f,"&tags=").concat(n,"&page=b").concat(a,"&_client=booru-mobile/1.0")}})}}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.17ea5074.chunk.js.map